% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cmv_helper_compensation.R
\name{cmv_helper_compensation}
\alias{cmv_helper_compensation}
\title{Apply Compensation to CMV Flow Cytometry Data}
\usage{
cmv_helper_compensation(
  ff_unapplied_compensations,
  compensation_type = c("manual", "auto", "auto_singlestain"),
  expected_max_proportion_value = 5,
  original_spillover_keyword = "$SPILLOVER"
)
}
\arguments{
\item{ff_unapplied_compensations}{A \code{flowFrame} object containing uncompensated data and
embedded compensation parameters (spillover matrix and autofluorescence vector) in the metadata.}

\item{compensation_type}{Character. Specifies the type of compensation to apply.
Options are:
\describe{
\item{"manual"}{Use a manually curated spillover matrix and autofluorescence vector (default).}
\item{"auto"}{Use values computed from DuraClone compensation tubes (Beckman Coulter).}
\item{"auto_singlestain"}{Use values derived from single stain controls within the CMV dataset.}
}}

\item{expected_max_proportion_value}{Numeric. Upper bound for expected spillover and autofluorescence values.
This prevents interpreting absolute values as proportions. Defaults to 5 (corresponding to 500\%).}

\item{original_spillover_keyword}{Character. The keyword in the FCS file that stores the original spillover matrix.
Defaults to \code{"$SPILLOVER"}.}
}
\value{
A \code{flowFrame} with compensation and autofluorescence correction applied.
}
\description{
This helper function applies a compensation matrix and autofluorescence correction
to CMV flow cytometry data as described in Glehr et al. (TO BE SUBMITTED).
It retrieves compensation parameters from the FCS file metadata using a custom keyword.
Multiple compensation types can be selected depending on how the compensation
was estimated (manual, auto, or auto_singlestain).
}
\keyword{relativisation}
