% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rescale.R
\name{rescale}
\alias{rescale}
\title{Rescale Sample Using Unified Feature Dictionary}
\usage{
rescale(
  sample_to_rescale,
  extracted_mfi,
  feature_unified_dict,
  missing_feature = c("minmax", "center_median"),
  inplace_datatable = FALSE,
  known_missing_features = c("FS INT", "FS TOF", "SS INT"),
  scale_column_fun = scale_column_minmax,
  ...
)
}
\arguments{
\item{sample_to_rescale}{A \code{flowFrame} or other object with marker (column) names to be rescaled.}

\item{extracted_mfi}{A \code{tibble} (or coercible to one) with at least three columns:
\describe{
\item{\code{feature}}{Character. Names of the features (e.g., \code{"FITC-A"}).}
\item{\code{negative}}{Numeric. MFI values for negative/unlabeled control.}
\item{\code{positive}}{Numeric. MFI values for positive/labeled control.}
}}

\item{feature_unified_dict}{A \code{data.frame} where rownames are marker names in \code{sample_to_rescale}, and
one column (\code{unified_single_staining}) maps to column names in \code{extracted_mfi}.}

\item{missing_feature}{Character. How to handle missing MFI entries (i.e., where list entry is \code{NA}).
Options are:
\itemize{
\item \code{"minmax"} (default): Rescale using column-wise min/max.
\item \code{"center_median"}: Shift column so that median is centered.
\item \code{NA}: Do not rescale columns with missing MFI values.
}}

\item{inplace_datatable}{Logical. If \code{TRUE}, modifies \code{sample_to_rescale} in place. If \code{FALSE}, returns a new copy. Default is \code{FALSE}.}

\item{scale_column_fun}{Function. The scaling function to apply per column. Default is \code{scale_column_minmax()}.
This function must accept at least \code{sample_to_rescale} (data.table), \code{scaling_values} (vector of numbers), and \code{colX} (character, a column of \code{sample_to_rescale}).}

\item{...}{Additional arguments passed to \code{scale_column_fun}.}
}
\value{
A \code{data.table} with rescaled columns.
}
\description{
This function rescales a sample (data.table) using extracted MFI values and a unified feature mapping.
If a feature is not listed in the dictionary, fallback methods such as min-max or median-centering are used.
}
